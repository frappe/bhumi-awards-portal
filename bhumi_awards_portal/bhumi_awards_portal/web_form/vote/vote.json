{
 "accept_payment": 0,
 "allow_comments": 0,
 "allow_delete": 0,
 "allow_edit": 0,
 "allow_incomplete": 0,
 "allow_multiple": 0,
 "allow_print": 0,
 "amount": 0.0,
 "amount_based_on_field": 0,
 "apply_document_permissions": 0,
 "button_label": "Vote",
 "client_script": "$('main').addClass('card voting-card');\n$('.awesomplete>ul').css('position', 'static');\n\n\n// Populate college field\nconst collegeName = decodeURIComponent(window.location.hash.substr(1));\nfrappe.web_form.set_value(\"college\", collegeName);\n\ndocument.getElementsByTagName(\"input\")[1].maxLength = 10;\ndocument.getElementsByTagName(\"input\")[1].minLength = 10;\n\nfrappe.web_form.after_load = () => {\n    frappe.call({\n        method: \"frappe.client.get_value\",\n        args: {\n            \"doctype\": \"Vote\",\n            \"filters\": {\"voter\": frappe.session.user},\n            \"fieldname\": \"name\"\n        },\n        callback: function(r) {\n            if (!r.exc) {\n                if (r.message.name) {\n                    frappe.msgprint(\"You have already Voted!\");\n\t\t\t\t\twindow.location.replace(\"/leaderboard\");\n\t\t\t\t}\n            }\n        }\n    });\n    \n    filterCollege();\n}\n\nfunction filterCollege() {\n    var url = 'api/resource/College?filters=[[\"College\",\"approval_status\",\"=\",\"Approved\"]]';\n\t$.ajax({\n\t\ttype: 'GET', \n\t\turl: url,\n\t\tasync: false,\n\t\tsuccess: function(result) {\n\t\t\tvar options = [];\n\t\t\tfor (var i = 0; i < result.data.length; i++) {\n\t\t\t\toptions.push({\n\t\t\t\t\t'label': result.data[i].name,\n\t\t\t\t\t'value': result.data[i].name\n\t\t\t\t});\n\t\t\t}\n\t\t\tvar field = frappe.web_form.get_field('college');\n\t\t\tfield._data = options;\n\t\t\tfield.refresh();\n\t\t}\n\t});\n}\n\nfrappe.web_form.after_save = () => {\n    frappe.msgprint({\n        message: \"Your vote was successfully submitted. Thank you for voting!\",\n        title: \"Success\",\n        indicator: \"green\"\n    });\n    setTimeout(() => {\n\t    window.location.replace(\"/leaderboard\");\t\n\t}, 3000);\n}\n\nfrappe.web_form.cancel = () => {\n    window.location.replace('/colleges');\n}",
 "creation": "2021-05-31 12:45:29.322194",
 "custom_css": ".awesomplete .input-with-feedback {\n    background-color: #F4F5F6 !important;\n}\n\n.page_content {\n    margin-top: 10px;\n}\n\n@media (min-width: 768px) {\n    .voting-card {\n        width: 50%;\n        padding: 30px !important;\n        margin-bottom: 30px !important;\n    }\n}\n\n@media (max-width: 767px) {\n    .voting-card {\n        padding: 35px !important;\n        margin-bottom: 30px !important;\n    }\n}",
 "doc_type": "Vote",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "introduction_text": "<div class=\"ql-editor read-mode\"><p>Please note that you can only vote once. Make sure you cast your valuable vote to the most deserving college \u2728</p></div>",
 "is_standard": 1,
 "login_required": 1,
 "max_attachment_size": 0,
 "modified": "2021-09-02 23:13:46.048129",
 "modified_by": "Administrator",
 "module": "Bhumi Awards Portal",
 "name": "vote",
 "owner": "Administrator",
 "payment_button_label": "Buy Now",
 "published": 1,
 "route": "vote",
 "route_to_success_link": 0,
 "show_attachments": 0,
 "show_in_grid": 0,
 "show_sidebar": 0,
 "sidebar_items": [],
 "success_message": "",
 "success_url": "/",
 "title": "Vote",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "college_details_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "College Details",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 1,
   "fieldname": "college",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "College",
   "max_length": 0,
   "max_value": 0,
   "options": "College",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "association_with_college",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Association with College",
   "max_length": 0,
   "max_value": 0,
   "options": "Current Student\nStudent Alumni\nCurrent Staff\nStaff Alumni\nNot Directly Associated",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "compulsory_volunteering",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Does this college have compulsory volunteering/community service hours?",
   "max_length": 0,
   "max_value": 0,
   "options": "Yes\nNo\nDon't Know",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "help_in_reaching_out",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Can you help us reach out to the above mentioned college management to ensure the application form is filled?",
   "max_length": 0,
   "max_value": 0,
   "options": "Yes\nNo",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "fieldname": "college_management_contact_person_details_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "College Management Contact Person Details",
   "mandatory_depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "fieldname": "management_name",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Name",
   "mandatory_depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "fieldname": "management_email",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Email ID",
   "mandatory_depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "max_length": 0,
   "max_value": 0,
   "options": "Email",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "fieldname": "management_contact",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Contact Number",
   "mandatory_depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "max_length": 0,
   "max_value": 0,
   "options": "Phone",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "fieldname": "management_designation",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Designation",
   "mandatory_depends_on": "eval:doc.help_in_reaching_out===\"Yes\"",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "voter_details_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Voter Details",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "voter_contact",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Your Contact",
   "max_length": 0,
   "max_value": 0,
   "options": "Phone",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "reason_for_nomination",
   "fieldtype": "Small Text",
   "hidden": 0,
   "label": "Reason for Nomination",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "voter_name",
   "fieldtype": "Data",
   "hidden": 1,
   "label": "Voter Name",
   "max_length": 0,
   "max_value": 0,
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "voter",
   "fieldtype": "Link",
   "hidden": 1,
   "label": "Voter",
   "max_length": 0,
   "max_value": 0,
   "options": "User",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  }
 ]
}